<!DOCTYPE html>
<html>
<head>
  <title>Official Tour Booking Form</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>

body {
  font-family: 'Open Sans', sans-serif;
  line-height: 1.6;
  font-size: 16px;
  margin: 0;
  padding: 0;
}

h1 {
  text-align: center;
}

form {
  max-width: 700px;
  margin: 0 auto;
  padding: 20px;
  border: 1px solid #ddd;
  background-color: #f7f7f7;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

.elem-group {
  margin-bottom: 20px;
}

.elem-group label {
  display: block;
  margin-bottom: 5px;
  font-weight: bold;
  color: #000000;
}

.small-input {
  width: 50%;
  height: 35px;
  padding: 8px;
  font-size: 16px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

.elem-group input[type="tel"],
.elem-group input[type="number"],
.elem-group input[type="date"],
.elem-group input[type="email"],
.elem-group input[type="text"],
.elem-group select,
.elem-group textarea {
  box-sizing: border-box;
  width: 100%;
  padding: 10px;
  margin: 8px;
  font-size: 16px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

.elem-group select {
  height: 38px;
  background-color: #fff;
}

.elem-group textarea {
  resize: vertical;
}

.elem-group.inlined {
  display: flex;
  align-items: center;
}

.elem-group.inlined label {
  margin-right: 10px;
  color: #555;
}

button[type="submit"] {
  display: block;
  width: 100%;
  margin-top: 20px;
  padding: 12px;
  background-color: #ff6f69;
  color: white;
  font-size: 18px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

button[type="submit"]:hover {
  background-color: #ff4d4f;
}

hr {
  border: none;
  border-top: 1px solid #ddd;
  margin: 20px 0;
}

.overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.6);
}

.popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  padding: 20px;
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
}


  </style>
</head>
<body>
    <h1>Official Tour Booking Form</h1>

  <form>
    <div class="elem-group">
      <label for="name">Name</label>
      <input type="text" id="name" name="name" placeholder="Name" pattern="[A-Za-z\s]{3,32}" required>
    </div>
    <div class="elem-group inlined">
      <label for="email">Email</label>
      <input type="email" id="email" name="email" placeholder="example@email.com" required>
      <label for="phone">Contact No</label>
      <input type="tel" id="phone" name="phone" placeholder="0123456789" pattern="^(\+?6?01)[02-46-9]-*[0-9]{7}$|^(\+?6?01)[1]-*[0-9]{8}$" required>
    </div>
    <div class="elem-group">
        <label for="tourType">Type of Tour</label>
        <input type="text" id="tourType" name="tour" required>
    </div>
    <div class="elem-group inlined">
        <label for="departure-date">Departure Date</label>
        <input type="date" id="departure-date" name="departure" required>
        <label for="arrival-date">Arrival Date</label>
        <input type="date" id="arrival-date" name="arrival" required>
      </div>
    
    
    
  <hr>
    <div class="elem-group inlined">
      <label for="adult-twin">Adult Twin</label>
      <input type="number" id="adult-twin" name="total_adult_twin" class="small-input" value="0" min="0" required>
      <label for="adult-twin-price">Adult Twin Price (RM) </label>
      <input type="number" id="adult-twin-price" name="adult_twin_price" class="small-input" value="0" step="0.01" required>
      <label for="child-with-bed">Child With Bed</label>
      <input type="number" id="child-with-bed" name="total_child_with_bed" placeholder="0" class="small-input" value="0" min="0" required>
      <label for="child-with-bed-price">Child With Bed Price (RM) </label>
      <input type="number" id="child-with-bed-price" name="child_with_bed_price" class="small-input" value="0" step="0.01" required>
    </div>
    <div class="elem-group inlined">
        <label for="child-no-bed">Child No Bed</label>
        <input type="number" id="child-no-bed" name="total_child_no_bed" placeholder="0" class="small-input" value="0" min="0" required>
        <label for="child-no-bed-price">Child No Bed Price (RM) </label>
        <input type="number" id="child-no-bed-price" name="child_no_bed_price" class="small-input" value="0" step="0.01" required>
        <label for="infant">Infant</label>
        <input type="number" id="infant" name="total_infant" placeholder="0" class="small-input" value="0" min="0" required>
        <label for="infant-price">Infant Price (RM) </label>
        <input type="number" id="infant-price" name="infant_price" class="small-input" value="0" step="0.01" required>
      </div>
      <div class="elem-group inlined">
        <label for="single-supplement">Single Supplement</label>
        <input type="number" id="single-supplement" name="total_single_supplement" placeholder="0" class="small-input" value="0" min="0" required>
        <label for="single-supplement-price">Single Supplement Price (RM) </label>
        <input type="number" id="single-supplement-price" name="single_supplement_price" class="small-input" value="0" step="0.01" required>
        <label for="tipping">Tipping</label>
        <input type="number" id="tipping" name="total_tipping" placeholder="0" class="small-input" value="0" min="0" required>
        <label for="tipping-price">Tipping Price (RM) </label>
        <input type="number" id="tipping-price" name="tipping_price" class="small-input" value="0" step="0.01" required>
      </div>
      <div class="elem-group inlined">
        <label for="meals-on-board">Meals On Board</label>
        <input type="number" id="meals-on-board" name="total_meals_on_board" placeholder="0" class="small-input" value="0" min="0" required>
        <label for="meals-on-board-price">Meals On Board Price (RM) </label>
        <input type="number" id="meals-on-board-price" name="meals_on_board_price" class="small-input" value="0" step="0.01" required>
        <label for="visa">Visa Fee</label>
        <input type="number" id="visa" name="total_visa" placeholder="0" class="small-input" value="0" min="0" required>
        <label for="visa-price">Visa Price (RM) </label>
        <input type="number" id="visa-price" name="visa_price" class="small-input" value="0" step="0.01" required>
      </div>
      <div class="elem-group inlined">
        <label for="travel-insurance">Travel Insurance</label>
        <input type="number" id="travel-insurance" name="total_travel_insurance" placeholder="0" class="small-input" value="0" min="0" required>
        <label for="travel-insurance-price">Travel Insurance Price (RM) </label>
        <input type="number" id="travel-insurance-price" name="travel_insurance_price" class="small-input" value="0" step="0.01" required>
        <label for="upgrade-business">Upgrade Business</label>
        <input type="number" id="upgrade-business" name="total_upgrade_business" placeholder="0" class="small-input" value="0" min="0" required>
        <label for="upgrade-business-price">Upgrade Business Price (RM) </label>
        <input type="number" id="upgrade-business-price" name="upgrade_business_price" class="small-input" value="0" step="0.01" required>
      </div>
      <div class="elem-group inlined">
        <label for="levy-tax">Levy Tax</label>
        <input type="number" id="levy-tax" name="total_levy_tax" placeholder="0" class="small-input" value="0" min="0" required>
        <label for="levy-tax-price">Levy Tax Price (RM) </label>
        <input type="number" id="levy-tax-price" name="levy_tax_price" class="small-input" value="0" step="0.01" required>
      </div>
      <hr>
      <div class="elem-group">
        <label for="total-cost">Total Cost (RM)</label>
        <input type="text" id="total-cost" readonly>
      </div>
    <div class="elem-group">
      <label for="room-selection">Select Room Preference</label>
      <select id="room-selection" name="room_preference" required>
        <option value="double">Double</option>
        <option value="triple">Triple</option>
      </select>
    </div>
    <hr>
    <div class="elem-group">
      <label for="message">Remarks</label>
      <textarea id="message" name="message" placeholder="Write any remarks here."></textarea>
    </div>
    <div> <p> <b>Please read the</b>
    <a href="#" onclick="showPopup()"><b>Terms and Conditions</b></a> <b>and tick the box below.</b></p> 
    <div class="overlay" id="overlay" onclick="hidePopup()">
      <div class="popup">
        <iframe src="terms.html" width="600" height="600" frameborder="0"></iframe>
      </div>   
    </div>
  </div>
    <div class="elem-group">
      <input type="checkbox" id="accept" value="termsncond" required>
      <label for="accept"> <br> Hereby I, <input type="text" id="confirmation-name" name="confirmation_name" placeholder="Name" pattern="[A-Za-z\s]{3,32}" required> have agreed to the terms and conditions as stated and we have read and understand.</label>
    </div>
    <button type="submit" id="book">Book</button>
  </form>


  <script>

    // Function to calculate the total cost
    function calculateTotalCost() {
      var adultTwinPrice = parseFloat(document.getElementById('adult-twin-price').value);
      var adultTwinQuantity = parseInt(document.getElementById('adult-twin').value);

      var childWithBedPrice = parseFloat(document.getElementById('child-with-bed-price').value);
      var childWithBedQuantity = parseInt(document.getElementById('child-with-bed').value);

      var childNoBedPrice = parseFloat(document.getElementById('child-no-bed-price').value);
      var childNoBedQuantity = parseInt(document.getElementById('child-no-bed').value);

      var infantPrice = parseFloat(document.getElementById('infant-price').value);
      var infantQuantity = parseInt(document.getElementById('infant').value);

      var singleSupplementPrice = parseFloat(document.getElementById('single-supplement-price').value);
      var singleSupplementQuantity = parseInt(document.getElementById('single-supplement').value);

      var tippingPrice = parseFloat(document.getElementById('tipping-price').value);
      var tippingQuantity = parseInt(document.getElementById('tipping').value);

      var mealsOnBoardPrice = parseFloat(document.getElementById('meals-on-board-price').value);
      var mealsOnBoardQuantity = parseInt(document.getElementById('meals-on-board').value);

      var visaPrice = parseFloat(document.getElementById('visa-price').value);
      var visaQuantity = parseInt(document.getElementById('visa').value);

      var travelInsurancePrice = parseFloat(document.getElementById('travel-insurance-price').value);
      var travelInsuranceQuantity = parseInt(document.getElementById('travel-insurance').value);

      var upgradeBusinessPrice = parseFloat(document.getElementById('upgrade-business-price').value);
      var upgradeBusinessQuantity = parseInt(document.getElementById('upgrade-business').value);

      var levyTaxPrice = parseFloat(document.getElementById('levy-tax-price').value);
      var levyTaxQuantity = parseInt(document.getElementById('levy-tax').value);

      // Calculate total cost
      var totalCost = (adultTwinPrice * adultTwinQuantity) +
        (childWithBedPrice * childWithBedQuantity) +
        (childNoBedPrice * childNoBedQuantity) +
        (infantPrice * infantQuantity) +
        (singleSupplementPrice * singleSupplementQuantity) +
        (tippingPrice * tippingQuantity) +
        (mealsOnBoardPrice * mealsOnBoardQuantity) +
        (visaPrice * visaQuantity) +
        (travelInsurancePrice * travelInsuranceQuantity) +
        (upgradeBusinessPrice * upgradeBusinessQuantity) +
        (levyTaxPrice * levyTaxQuantity);

      // Update the total cost display
      document.getElementById('total-cost').value = totalCost.toFixed(2);
    }

    // Event listeners for input elements to trigger total cost calculation
    var inputElements = document.querySelectorAll('.small-input');
    for (var i = 0; i < inputElements.length; i++) {
      inputElements[i].addEventListener('input', calculateTotalCost);
    }

    //Function to show popup
    function showPopup() {
      document.getElementById('overlay').style.display = 'block';
    }

    //Function to hide popup
    function hidePopup() {
      document.getElementById('overlay').style.display = 'none';
    }

  </script>

  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
    import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-database.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyCaoBfovJFYU66gfOiPTs0OCilLAkm6u-U",
      authDomain: "ibctours-d48ba.firebaseapp.com",
      databaseURL: "https://ibctours-d48ba-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "ibctours-d48ba",
      storageBucket: "ibctours-d48ba.appspot.com",
      messagingSenderId: "431234246882",
      appId: "1:431234246882:web:ad6464e84e1d852301d6bb"
        };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);

    // get ref to database services
    const db = getDatabase(app);

    document.getElementById("book").addEventListener('click', function(e){
      e.preventDefault();
      
      set(ref(db, 'user/' + document.getElementById("name").value),
      {

        name: document.getElementById("name").value,
        phone: document.getElementById("phone").value,
        email: document.getElementById("email").value,
        tourType: document.getElementById("tourType").value,
        departureDate: document.getElementById("departure-date").value,
        arrivalDate: document.getElementById("arrival-date").value,
        adultTwin: document.getElementById("adult-twin").value,
        adultTwinPrice: document.getElementById("adult-twin-price").value,
        childWithBed: document.getElementById("child-with-bed").value,
        childWithBedPrice: document.getElementById("child-with-bed-price").value,
        childNoBed: document.getElementById("child-no-bed").value,
        childNoBedPrice: document.getElementById("child-no-bed-price").value,
        infant: document.getElementById("infant").value,
        infantPrice: document.getElementById("infant-price").value,
        singleSupplement: document.getElementById("single-supplement").value,
        singleSupplementPrice: document.getElementById("single-supplement-price").value,
        tipping: document.getElementById("tipping").value,
        tippingPrice: document.getElementById("tipping-price").value,
        mealsOnBoard: document.getElementById("meals-on-board").value,
        mealsOnBoardPrice: document.getElementById("meals-on-board-price").value,
        visa: document.getElementById("visa").value,
        visaPrice: document.getElementById("visa-price").value,
        travelInsurance: document.getElementById("travel-insurance").value,
        travelInsurancePrice: document.getElementById("travel-insurance-price").value,
        upgradeBusiness: document.getElementById("upgrade-business").value,
        upgradeBusinessPrice: document.getElementById("upgrade-business-price").value,
        levyTax: document.getElementById("levy-tax").value,
        levyTaxPrice: document.getElementById("levy-tax-price").value,
        totalCost: document.getElementById("total-cost").value,
        roomSelection: document.getElementById("room-selection").value,
        message: document.getElementById("message").value,
        confirmationName: document.getElementById("confirmation-name").value,

      });
      alert ("Booking successful.");
    })

  </script>


</body>
</html>
